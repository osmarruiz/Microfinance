@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager

@{
    string IsActive(string controller, string action = null)
    {
        var currentController = ViewContext.RouteData.Values["Controller"]?.ToString();
        var currentAction = ViewContext.RouteData.Values["Action"]?.ToString();
        
        if (string.IsNullOrEmpty(action))
            return currentController == controller ? "active" : "";
        
        return (currentController == controller && currentAction == action) ? "active" : "";
    }
}

<style>
    /* Estilos para el hover y active */
    .nav-link {
        transition: all 0.3s ease;
        border-radius: 0.375rem;
        margin: 0.25rem 0.5rem;
        padding: 0.5rem 1rem;
    }

    .nav-link:hover {
        background-color: rgba(0, 0, 0, 0.05);
        transform: translateX(3px);
    }

    .nav-link.active {
        background-color: #5e72e4;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    

    .nav-link.active i {
        color: #5e72e4 !important;
    }

    .nav-link-text {
        transition: all 0.3s ease;
    }

    .nav-link:hover .nav-link-text {
        font-weight: 600;
    }
</style>

<aside class="sidenav bg-white navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-4" id="sidenav-main">
  <div class="sidenav-header">
    @if (SignInManager.IsSignedIn(User))
    {
      <a class="nav-link text-dark p-4" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage">
        <span class="fs-6">Hola!</span> <span class="text-bold">@User.Identity?.Name!</span>
      </a>
    }
  </div>
  <hr class="horizontal dark mt-0">
  <div class="collapse navbar-collapse w-auto" id="sidenav-collapse-main">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="bg-danger nav-link @IsActive("Dashboard")" asp-controller="Dashboard" asp-action="Index">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-tv-2 text-dark text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Dashboard</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link @IsActive("Customers")" asp-controller="Customers" asp-action="Index">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-single-02 text-dark text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Clientes</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link @IsActive("Loans")" asp-controller="Loans" asp-action="Index">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-paper-diploma text-dark text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Prestamos</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link @IsActive("Installments")" asp-controller="Installments" asp-action="Index">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-credit-card text-dark text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Cuotas</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link @IsActive("Payments")" asp-controller="Payments" asp-action="Index">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-money-coins text-dark text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Pagos</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link @IsActive("CollectionManagements")" asp-controller="CollectionManagements" asp-action="Index">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-book-bookmark text-dark text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Gestion de cobros</span>
        </a>
      </li>
      <li class="nav-item ">
        <a class="bg-danger nav-link @IsActive("Reports")" href="#">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-chart-bar-32 text-dark text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Reportes</span>
        </a>
      </li>
      <hr class="horizontal dark mt-0">
      <li class="nav-item">
        <a class="nav-link @IsActive("Users")" href="#">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-circle-08 text-dark text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Usuarios del sistema</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link @IsActive("AuditLogs")" asp-controller="AuditLogs" asp-action="Index">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-collection text-dark text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Auditoria</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link @IsActive("Backups")" href="#">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-folder-17 text-dark text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Copias de seguridad</span>
        </a>
      </li>
    </ul>
  </div>
</aside>


